<!DOCTYPE html>
<html lang="pt-PT">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ… AmigÃ£o - Sorteio de Amigo Secreto</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <h1>ğŸ… AmigÃ£o ğŸ</h1>
      <p>Organiza os teus sorteios de forma fÃ¡cil e divertida</p>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Menu Principal -->
      <div id="menuPage" class="page">
        <section class="section menu-section">
          <h2>O que queres fazer?</h2>
          
          <div class="menu-buttons">
            <button onclick="showCreateDrawingForm()" class="btn btn-primary btn-large menu-btn">
              â• Criar Novo Sorteio
            </button>
            <button onclick="loadDrawings()" class="btn btn-secondary btn-large menu-btn">
              ğŸ“‹ Ver Sorteios Criados
            </button>
          </div>
        </section>
      </div>

      <!-- Lista de Sorteios -->
      <div id="drawingsListPage" class="page hidden">
        <div class="page-header">
          <button onclick="backToMenu()" class="btn btn-secondary btn-small">â† Voltar</button>
          <h2>Meus Sorteios</h2>
        </div>

        <div id="drawingsList" class="drawings-grid">
          <p class="empty-state">Carregando sorteios...</p>
        </div>
      </div>

      <!-- FormulÃ¡rio Criar Sorteio -->
      <div id="createDrawingPage" class="page hidden">
        <div class="page-header">
          <button onclick="backToMenu()" class="btn btn-secondary btn-small">â† Voltar</button>
          <h2>Criar Novo Sorteio</h2>
        </div>

        <section class="section">
          <form onsubmit="submitCreateDrawing(event)" class="form">
            <div class="form-group">
              <label for="drawingName">Nome do Sorteio</label>
              <input type="text" id="drawingName" placeholder="Ex: Natal 2025, Amigo Secreto Trabalho..." required class="input">
            </div>

            <div class="form-group">
              <label for="drawingMaxValue">Valor MÃ¡ximo da Prenda (â‚¬)</label>
              <input type="number" id="drawingMaxValue" placeholder="Ex: 50" min="1" step="0.01" required class="input">
            </div>

            <button type="submit" class="btn btn-success btn-large">
              âœ“ Criar Sorteio
            </button>
          </form>
        </section>
      </div>

      <!-- PÃ¡gina do Sorteio (EdiÃ§Ã£o) -->
      <div id="drawingEditorPage" class="page hidden">
        <div class="page-header">
          <button onclick="backToDrawingsList()" class="btn btn-secondary btn-small">â† Voltar</button>
          <h2 id="drawingTitle">Sorteio</h2>
        </div>

        <!-- Info do Sorteio -->
        <section class="section drawing-info">
          <div class="info-grid">
            <div class="info-item">
              <span class="label">Nome:</span>
              <span class="value" id="infoName">-</span>
            </div>
            <div class="info-item">
              <span class="label">Valor MÃ¡ximo:</span>
              <span class="value" id="infoMaxValue">-</span>
            </div>
            <div class="info-item">
              <span class="label">Participantes:</span>
              <span class="value" id="infoParticipants">0</span>
            </div>
            <div class="info-item">
              <span class="label">Criado:</span>
              <span class="value" id="infoCreated">-</span>
            </div>
          </div>
        </section>

        <!-- SeÃ§Ã£o de Participantes -->
        <section class="section participants-section">
          <h3>Adicionar Participantes</h3>
          
          <div class="form-group">
            <input type="text" id="participantName" placeholder="Nome do participante" class="input">
            <input type="tel" id="participantPhone" placeholder="Telefone (ex: +351912345678 ou 912345678)" class="input">
            <button onclick="addParticipantToDrawing()" class="btn btn-primary">Adicionar</button>
          </div>

          <!-- Lista de Participantes -->
          <div class="participants-list">
            <h4>Participantes (<span id="participantCount">0</span>)</h4>
            <div id="participantsList" class="list">
              <p class="empty-state">Nenhum participante adicionado ainda</p>
            </div>
          </div>
        </section>

        <!-- SeÃ§Ã£o de RestriÃ§Ãµes -->
        <section class="section restrictions-section">
          <h3>RestriÃ§Ãµes (Opcional)</h3>
          <p class="help-text">Define pessoas que nÃ£o podem tirar uma Ã  outra</p>
          
          <div class="form-group">
            <select id="restrictionFrom" class="input">
              <option value="">Seleciona quem NÃƒO pode tirar:</option>
            </select>
            <select id="restrictionTo" class="input">
              <option value="">Seleciona quem nÃ£o pode ser tirado:</option>
            </select>
            <button onclick="addRestrictionToDrawing()" class="btn btn-secondary">Adicionar RestriÃ§Ã£o</button>
          </div>

          <!-- Lista de RestriÃ§Ãµes -->
          <div id="restrictionsList" class="list">
            <p class="empty-state">Sem restriÃ§Ãµes</p>
          </div>
        </section>

        <!-- SeÃ§Ã£o de Sorteio -->
        <section class="section drawing-section">
          <h3>Executar Sorteio</h3>
          
          <div class="drawing-actions">
            <button onclick="executeDrawing()" class="btn btn-success btn-large" id="drawBtn">
              ğŸ² Fazer Sorteio
            </button>
            <button onclick="toggleResultsView()" class="btn btn-info btn-large" id="viewResultsBtn" style="display: none;">
              ğŸ‘ï¸ Ver Resultados
            </button>
          </div>

          <!-- AÃ§Ãµes IntermediÃ¡rias (Entre Sorteio e Resultados) -->
          <div id="intermediateActions" class="intermediate-actions hidden">
            <button onclick="sendViaWhatsApp()" class="btn btn-primary btn-large">
              ğŸ’¬ Enviar por WhatsApp
            </button>
            <button onclick="downloadResults()" class="btn btn-secondary btn-large">
              ğŸ“¥ Descarregar Resultados
            </button>
            <button onclick="resetDrawing()" class="btn btn-danger btn-large">
              ğŸ”„ Novo Sorteio
            </button>
          </div>

          <!-- Resultados (Ocultos por padrÃ£o) -->
          <div id="resultsContainer" class="results-container hidden">
            <div class="results-header">
              <h4>Resultados do Sorteio</h4>
              <button onclick="toggleResultsView()" class="btn btn-secondary btn-small">âœ• Fechar</button>
            </div>
            <div id="resultsList" class="results-list">
              <!-- Os resultados aparecem aqui -->
            </div>
          </div>
        </section>

        <!-- AÃ§Ãµes do Sorteio -->
        <section class="section actions-section">
          <button onclick="deleteDrawing()" class="btn btn-danger">
            ğŸ—‘ï¸ Deletar Sorteio
          </button>
        </section>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <p>AmigÃ£o v1.0.0 | Desenvolvido por Jaime Soares Mascarenhas | Â© 2025</p>
    </footer>
  </div>

  <!-- Scripts -->
  <script src="script.js"></script>
</body>
</html>
