<!DOCTYPE html>
<html lang="pt-PT">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ… AmigÃ£o - Sorteio de Amigo Secreto ğŸ„âœ¨</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="snowflakes">
    <div class="snowflake">â„ï¸</div>
    <div class="snowflake">â„ï¸</div>
    <div class="snowflake">â„ï¸</div>
    <div class="snowflake">â„ï¸</div>
    <div class="snowflake">â„ï¸</div>
    <div class="snowflake">â„ï¸</div>
    <div class="snowflake">â„ï¸</div>
    <div class="snowflake">â„ï¸</div>
    <div class="snowflake">â„ï¸</div>
    <div class="snowflake">â„ï¸</div>
  </div>

  <div class="container">
    <!-- Header -->
    <header class="header">
      <h1>ğŸ… AmigÃ£o ğŸ„ âœ¨</h1>
      <p>ğŸ Organiza os teus sorteios de Natal com magia e diversÃ£o! ğŸ‰</p>
      <div class="header-decoration">
        ğŸ„ â„ï¸ ğŸ… â›„ ğŸ âœ¨ ğŸ”” â¤ï¸ ğŸ’š ğŸŒŸ
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Menu Principal -->
      <div id="menuPage" class="page">
        <section class="section menu-section">
          <h2>ğŸ‰ O que queres fazer? ğŸ‰</h2>
          
          <div class="menu-buttons">
            <button onclick="showCreateDrawingForm()" class="btn btn-primary btn-large menu-btn">
              ğŸ„ â• Criar Novo Sorteio ğŸ„
            </button>
            <button onclick="loadDrawings()" class="btn btn-secondary btn-large menu-btn">
              ğŸ“‹ Ver Sorteios Criados ğŸ
            </button>
          </div>

          <div class="festive-decoration">
            <span class="decoration-item">ğŸ…</span>
            <span class="decoration-item">ğŸ„</span>
            <span class="decoration-item">ğŸ</span>
            <span class="decoration-item">âœ¨</span>
            <span class="decoration-item">â›„</span>
            <span class="decoration-item">â„ï¸</span>
            <span class="decoration-item">ğŸ””</span>
            <span class="decoration-item">â¤ï¸</span>
            <span class="decoration-item">ğŸ’š</span>
            <span class="decoration-item">ğŸŒŸ</span>
          </div>

          <!-- LARGE CHRISTMAS ASCII ART -->
          <div class="large-christmas-art">
            <pre class="christmas-ascii">
     ğŸ…ğŸ…ğŸ…
    ğŸ‘¨â€ğŸ„ğŸ‘¨â€ğŸ„ğŸ‘¨â€ğŸ„
   Ho Ho Ho!
   
      ğŸ„ğŸ„ğŸ„
     ğŸ„ğŸ„ğŸ„ğŸ„
    ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„
   ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„ğŸ„
      â­âœ¨â­
            </pre>
          </div>

          <div class="large-christmas-art">
            <pre class="christmas-ascii">
   ğŸ¦ŒğŸ¦ŒğŸ¦Œ
  Renas MÃ¡gicas!
   ğŸ¦ŒğŸ¦ŒğŸ¦Œ
   
  ğŸ„ ğŸ„ ğŸ„
  
   ğŸ§¦ğŸ§¦ğŸ§¦
  Meias de Natal!
   ğŸ§¦ğŸ§¦ğŸ§¦
            </pre>
          </div>

          <div class="large-christmas-art">
            <pre class="christmas-ascii big-art">
        ğŸğŸğŸğŸğŸ
       ğŸâœ¨NATALâœ¨ğŸ
      ğŸğŸğŸğŸğŸğŸ
     
     Presentes MÃ¡gicos!
     
      ğŸ„â„ï¸ğŸ„â„ï¸ğŸ„
     â›„ğŸ…â›„ğŸ…â›„
      ğŸ””ğŸğŸ””ğŸğŸ””
            </pre>
          </div>
        </section>
      </div>

      <!-- Lista de Sorteios -->
      <div id="drawingsListPage" class="page hidden">
        <div class="page-header">
          <button onclick="backToMenu()" class="btn btn-secondary btn-small">â† Voltar ğŸ </button>
          <h2>ğŸ Meus Sorteios ğŸ„</h2>
        </div>
        <div class="page-decoration">
          <pre class="small-christmas">ğŸ§¦ ğŸ… ğŸ¦Œ ğŸ„ ğŸ âœ¨ â›„ ğŸ”” ğŸ§¦ ğŸ… ğŸ¦Œ ğŸ„</pre>
        </div>

        <div id="drawingsList" class="drawings-grid">
          <p class="empty-state">ğŸ„ Carregando sorteios... âœ¨</p>
        </div>
      </div>

      <!-- FormulÃ¡rio Criar Sorteio -->
      <div id="createDrawingPage" class="page hidden">
        <div class="page-header">
          <button onclick="backToMenu()" class="btn btn-secondary btn-small">â† Voltar ğŸ </button>
          <h2>ğŸ„ Criar Novo Sorteio ğŸ…</h2>
        </div>
        <div class="page-decoration">
          <pre class="small-christmas">ğŸ…ğŸ¦ŒğŸ§¦ MAGIA DE NATAL ğŸ„ğŸ””âœ¨</pre>
        </div>

        <section class="section">
          <form onsubmit="submitCreateDrawing(event)" class="form">
            <div class="form-group">
              <label for="drawingName">ğŸ Nome do Sorteio ğŸ</label>
              <input type="text" id="drawingName" placeholder="Ex: Natal 2025, Amigo Secreto Trabalho..." required class="input">
            </div>

            <div class="form-group">
              <label for="drawingMaxValue">ğŸ’° Valor MÃ¡ximo da Prenda (â‚¬) ğŸ’°</label>
              <input type="number" id="drawingMaxValue" placeholder="Ex: 50" min="1" step="0.01" required class="input">
            </div>

            <button type="submit" class="btn btn-success btn-large">
              âœ… Criar Sorteio ğŸ„
            </button>
          </form>
        </section>
      </div>

      <!-- PÃ¡gina do Sorteio (EdiÃ§Ã£o) -->
      <div id="drawingEditorPage" class="page hidden">
        <div class="page-header">
          <button onclick="backToDrawingsList()" class="btn btn-secondary btn-small">â† Voltar ğŸ</button>
          <h2 id="drawingTitle">ğŸ„ Sorteio ğŸ„</h2>
        </div>
        <div class="page-decoration">
          <pre class="small-christmas">ğŸ… HO HO HO! ğŸ… ğŸ¦ŒğŸ¦ŒğŸ¦Œ ğŸ§¦ğŸ§¦ğŸ§¦ ğŸâœ¨ğŸŒŸ</pre>
        </div>

        <!-- Info do Sorteio -->
        <section class="section drawing-info">
          <div class="info-grid">
            <div class="info-item">
              <span class="label">ğŸ… Nome:</span>
              <span class="value" id="infoName">-</span>
            </div>
            <div class="info-item">
              <span class="label">ğŸ’° Valor MÃ¡ximo:</span>
              <span class="value" id="infoMaxValue">-</span>
            </div>
            <div class="info-item">
              <span class="label">ğŸ‘¥ Participantes:</span>
              <span class="value" id="infoParticipants">0</span>
            </div>
            <div class="info-item">
              <span class="label">ğŸ“… Criado:</span>
              <span class="value" id="infoCreated">-</span>
            </div>
          </div>
        </section>

        <!-- SeÃ§Ã£o de Participantes -->
        <section class="section participants-section">
          <h3>ğŸ‘¥ Adicionar Participantes ğŸ…âœ¨</h3>
          <div class="section-decoration">
            <span>ğŸ¦Œ ğŸ¦Œ ğŸ¦Œ</span>
          </div>
          
          <div class="form-group">
            <input type="text" id="participantName" placeholder="ğŸ“ Nome do participante" class="input">
            <input type="text" id="participantPhone" placeholder="ğŸ“± Telefone (9 dÃ­gitos: ex: 912345678)" class="input" maxlength="9" pattern="[0-9]{9}">
            <button onclick="addParticipantToDrawing()" class="btn btn-primary">â• Adicionar ğŸ„</button>
          </div>

          <!-- Lista de Participantes -->
          <div class="participants-list">
            <h4>ğŸ‘¥ Participantes ğŸ (<span id="participantCount">0</span>)</h4>
            <div id="participantsList" class="list">
              <p class="empty-state">â„ï¸ Nenhum participante adicionado ainda â„ï¸</p>
            </div>
          </div>
        </section>

        <!-- SeÃ§Ã£o de RestriÃ§Ãµes -->
        <section class="section restrictions-section">
          <h3>ğŸš« RestriÃ§Ãµes (Opcional) ğŸš«</h3>
          <div class="section-decoration">
            <span>ğŸ§¦ ğŸ§¦ ğŸ§¦</span>
          </div>
          <p class="help-text">ğŸ­ Define pessoas que nÃ£o podem tirar uma Ã  outra ğŸ­</p>
          
          <div class="form-group">
            <select id="restrictionFrom" class="input">
              <option value="">Seleciona quem NÃƒO pode tirar:</option>
            </select>
            <select id="restrictionTo" class="input">
              <option value="">Seleciona quem nÃ£o pode ser tirado:</option>
            </select>
            <button onclick="addRestrictionToDrawing()" class="btn btn-secondary">â• Adicionar RestriÃ§Ã£o</button>
          </div>

          <!-- Lista de RestriÃ§Ãµes -->
          <div id="restrictionsList" class="list">
            <p class="empty-state">âœ… Sem restriÃ§Ãµes âœ…</p>
          </div>
        </section>

        <!-- SeÃ§Ã£o de Sorteio -->
        <section class="section drawing-section">
          <h3>ğŸ² Executar Sorteio ğŸ²</h3>
          <div class="section-decoration">
            <span>ğŸ ğŸ„ ğŸ ğŸ„ ğŸ</span>
          </div>
          
          <div class="drawing-actions">
            <button onclick="executeDrawing()" class="btn btn-success btn-large" id="drawBtn">
              ğŸ² FAZER SORTEIO ğŸ„âœ¨
            </button>
            <button onclick="toggleResultsView()" class="btn btn-info btn-large" id="viewResultsBtn" style="display: none;">
              ğŸ‘ï¸ VER RESULTADOS ğŸ
            </button>
          </div>

          <!-- AÃ§Ãµes IntermediÃ¡rias (Entre Sorteio e Resultados) -->
          <div id="intermediateActions" class="intermediate-actions hidden">
            <button onclick="sendViaWhatsApp()" class="btn btn-primary btn-large">
              ğŸ’¬ ENVIAR por WhatsApp ğŸ‰
            </button>
            <button onclick="downloadResults()" class="btn btn-secondary btn-large">
              ğŸ“¥ DESCARREGAR Resultados ğŸ“„
            </button>
            <button onclick="resetDrawing()" class="btn btn-danger btn-large">
              ğŸ”„ NOVO SORTEIO ğŸ²
            </button>
          </div>

          <!-- Resultados (Ocultos por padrÃ£o) -->
          <div id="resultsContainer" class="results-container hidden">
            <div class="results-header">
              <h4>âœ¨ RESULTADOS DO SORTEIO ğŸâœ¨</h4>
              <button onclick="toggleResultsView()" class="btn btn-secondary btn-small">âœ• Fechar âŒ</button>
            </div>
            <div id="resultsList" class="results-list">
              <!-- Os resultados aparecem aqui -->
            </div>
          </div>

          <!-- Link Privado do Organizador (Oculto por padrÃ£o) -->
          <div id="organizerResultLink" style="display:none; margin: 20px 0; font-size: 1em;"></div>
        </section>

        <!-- AÃ§Ãµes do Sorteio -->
        <section class="section actions-section">
          <button onclick="deleteDrawing()" class="btn btn-danger">
            ğŸ—‘ï¸ DELETAR Sorteio ğŸš¨
          </button>
        </section>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <p id="footerVersion">ğŸ„ AmigÃ£o v1.2.2 ğŸ„ | Desenvolvido por <a href="javascript:void(0)" onclick="openDeveloperModal()" style="cursor: pointer; color: #fff; text-decoration: underline;" title="Clica para ver o programador">Jaime Soares Mascarenhas</a> âœ¨ | Â© 2025 â¤ï¸ ğŸ’š</p>
      <p class="footer-decoration">
        ğŸ… ğŸ„ ğŸ âœ¨ â›„ â„ï¸ ğŸ”” ğŸ’š â¤ï¸ ğŸŒŸ ğŸ‰ ğŸŠ
      </p>
      
      <!-- SecÃ§Ã£o de Donativo -->
      <div class="donation-section" style="margin-top: 20px; padding: 15px; background: rgba(255, 215, 0, 0.1); border-radius: 8px; border-left: 4px solid #FFD700;">
        <p style="margin: 5px 0; font-size: 0.95em;">
          ğŸ’³ <strong>Apreciaste o AmigÃ£o?</strong> Considera fazer um donativo via <strong>MBWay</strong> â˜ºï¸
        </p>
        <p style="margin: 5px 0; font-size: 0.9em;">
          <a href="https://www.mbway.pt/" target="_blank" style="color: #FFD700; text-decoration: none; font-weight: bold;" onclick="window.open('https://www.mbway.pt/', '_blank'); return false;" title="Clica para abrir MBWay">ğŸ“± MBWay: +351 912312938</a>
        </p>
        <p style="margin: 5px 0; font-size: 0.85em; color: #999;">
          Os teus donativos ajudam a manter e melhorar a aplicaÃ§Ã£o! ğŸ™âœ¨
        </p>
      </div>
    </footer>
    
    <!-- Modal do Programador -->
    <div id="developerModal" class="modal hidden" onclick="if(event.target === this) closeDeveloperModal()">
      <div class="modal-content developer-modal">
        <button class="modal-close" onclick="closeDeveloperModal()">âœ•</button>
        <div class="developer-card">
          <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 500'%3E%3Cdefs%3E%3Cstyle%3E.dev-bg%7Bfill:%23e8f4f8%7D.dev-grid%7Bstroke:%2390c9d6;stroke-width:2;fill:none%7D.dev-person%7Bfill:%23daa55c%7D.dev-hair%7Bfill:%234a3c2a%7D.dev-glasses%7Bfill:none;stroke:%23333;stroke-width:3%7D.dev-mouth%7Bfill:none;stroke:%23333;stroke-width:2%7D%3C/style%3E%3C/defs%3E%3Crect class='dev-bg' width='400' height='500'/%3E%3Cg class='dev-grid'%3E%3Cline x1='0' y1='100' x2='400' y2='100'/%3E%3Cline x1='0' y1='200' x2='400' y2='200'/%3E%3Cline x1='0' y1='300' x2='400' y2='300'/%3E%3Cline x1='0' y1='400' x2='400' y2='400'/%3E%3Cline x1='100' y1='0' x2='100' y2='500'/%3E%3Cline x1='200' y1='0' x2='200' y2='500'/%3E%3Cline x1='300' y1='0' x2='300' y2='500'/%3E%3C/g%3E%3Crect class='dev-person' x='120' y='200' width='160' height='200' rx='10'/%3E%3Ccircle class='dev-person' cx='200' cy='120' r='70'/%3E%3Cg class='dev-hair'%3E%3Cpath d='M 150 70 Q 140 50 160 40 Q 180 30 200 30 Q 220 30 240 40 Q 260 50 250 70 Z'/%3E%3Ccircle cx='160' cy='55' r='8'/%3E%3Ccircle cx='240' cy='55' r='8'/%3E%3C/g%3E%3Ccircle cx='170' cy='100' r='25' class='dev-glasses'/%3E%3Ccircle cx='230' cy='100' r='25' class='dev-glasses'/%3E%3Cline x1='195' y1='100' x2='205' y2='100' class='dev-glasses'/%3E%3Ccircle cx='200' cy='135' r='5' fill='%23333'/%3E%3Cpath d='M 190 160 Q 200 170 210 160' class='dev-mouth'/%3E%3Crect x='140' y='210' width='50' height='80' rx='5' fill='%23c84040'/%3E%3Crect x='210' y='210' width='50' height='80' rx='5' fill='%23c84040'/%3E%3Crect x='145' y='290' width='35' height='100' fill='%23daa55c'/%3E%3Crect x='220' y='290' width='35' height='100' fill='%23daa55c'/%3E%3C/svg%3E" alt="Jaime Soares Mascarenhas" class="developer-photo">
          <div class="developer-info">
            <h3>ğŸ† Jaime Soares Mascarenhas</h3>
            <p class="developer-role">ğŸ’» Full-Stack Developer</p>
            <p class="developer-bio">Entusiasta de programaÃ§Ã£o e criaÃ§Ã£o de soluÃ§Ãµes inovadoras para o Natal! ğŸ„âœ¨</p>
            <div class="developer-skills">
              <span class="skill">Node.js</span>
              <span class="skill">Express</span>
              <span class="skill">JavaScript</span>
              <span class="skill">HTML/CSS</span>
              <span class="skill">REST APIs</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="script.js"></script>
</body>
</html>
